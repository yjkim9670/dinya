# ëª¨ì˜íˆ¬ìž ì‹œìŠ¤í…œ ê°€ì´ë“œ

## ðŸ“Š ëª¨ì˜íˆ¬ìžëž€?

ëª¨ì˜íˆ¬ìžëŠ” ì‹¤ì œ ëˆì„ íˆ¬ìží•˜ì§€ ì•Šê³ , ê°€ìƒì˜ ìžë³¸ìœ¼ë¡œ íˆ¬ìž ì „ëžµì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì‹œë®¬ë ˆì´ì…˜ìž…ë‹ˆë‹¤. ë³¸ ì‹œìŠ¤í…œì€ **ê¸°ìˆ ì  ì§€í‘œ ê¸°ë°˜ ì¶”ì²œ ì ìˆ˜**ë¥¼ í™œìš©í•˜ì—¬ ìžë™ìœ¼ë¡œ ë§¤ë§¤ë¥¼ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

## ðŸ’° ì´ˆê¸° ì„¤ì •

### ìžë³¸ê¸ˆ
- **ì¢…ëª©ë‹¹ ì´ˆê¸° ìžë³¸**: 10,000,000ì› (1ì²œë§Œì›)
- **ì´ ì´ˆê¸° ìžë³¸**: 40,000,000ì› (4ì²œë§Œì›)
  - ì‚¼ì„±ì „ìž: 1,000ë§Œì›
  - SKí•˜ì´ë‹‰ìŠ¤: 1,000ë§Œì›
  - TIGER S&P500: 1,000ë§Œì›
  - TIGER ë‚˜ìŠ¤ë‹¥100: 1,000ë§Œì›

### ë…ë¦½ ìš´ìš©
ê° ì¢…ëª©ì€ **ì™„ì „ížˆ ë…ë¦½ì ìœ¼ë¡œ** ìš´ìš©ë©ë‹ˆë‹¤. í•œ ì¢…ëª©ì˜ ìˆ˜ìµì´ë‚˜ ì†ì‹¤ì´ ë‹¤ë¥¸ ì¢…ëª©ì˜ ìžë³¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ðŸŽ¯ ë§¤ë§¤ ê·œì¹™

### ì¶”ì²œ ì ìˆ˜ ê³„ì‚°
ë§¤ ê±°ëž˜ì¼ë§ˆë‹¤ 4ê°€ì§€ ê¸°ìˆ ì  ì§€í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ 0~100ì ì˜ ì¶”ì²œ ì ìˆ˜ê°€ ê³„ì‚°ë©ë‹ˆë‹¤:

| ì§€í‘œ | ê°€ì¤‘ì¹˜ | ì¡°ê±´ |
|------|--------|------|
| **ì´ë™í‰ê·  ì¶”ì„¸** | Â±20ì  | 5ì¼ì„ ì´ 20ì¼ì„  ìœ„ë©´ +20, ì•„ëž˜ë©´ -20 |
| **RSI** | Â±15ì  | RSI â‰¤ 30: +15, RSI â‰¥ 70: -15 |
| **ìŠ¤í† ìºìŠ¤í‹±** | Â±10ì  | %K â‰¤ 20: +10, %K â‰¥ 80: -10, êµì°¨ ì‹œê·¸ë„ ë°˜ì˜ |
| **MACD** | Â±15ì  | MACD > Signal: +15, MACD < Signal: -15 |

**ê¸°ë³¸ ì ìˆ˜**: 50ì ì—ì„œ ì‹œìž‘í•˜ì—¬ ê° ì§€í‘œì˜ ê°€ì¤‘ì¹˜ê°€ ë”í•´ì§€ê±°ë‚˜ ë¹¼ì§‘ë‹ˆë‹¤.

### ë§¤ë§¤ ì‹¤í–‰ ê¸°ì¤€

#### ðŸŸ¢ ë§¤ìˆ˜ (Buy)
- **ì¡°ê±´**: ì¶”ì²œ ì ìˆ˜ â‰¥ 80ì 
- **ì‹¤í–‰**: í˜„ìž¬ ë³´ìœ í•œ **ê°€ìš© í˜„ê¸ˆ ì „ì•¡**ìœ¼ë¡œ ë§¤ìˆ˜
- **ê³„ì‚°ì‹**:
  ```
  ë§¤ìˆ˜ ê°€ëŠ¥ ìˆ˜ëŸ‰ = floor(ê°€ìš© í˜„ê¸ˆ / í˜„ìž¬ê°€)
  ì‹¤ì œ ë§¤ìˆ˜ ê¸ˆì•¡ = ë§¤ìˆ˜ ê°€ëŠ¥ ìˆ˜ëŸ‰ Ã— í˜„ìž¬ê°€
  ë‚¨ì€ í˜„ê¸ˆ = ê°€ìš© í˜„ê¸ˆ - ì‹¤ì œ ë§¤ìˆ˜ ê¸ˆì•¡
  ```
- **í‰ê·  ë§¤ìž…ê°€ ê³„ì‚°**:
  ```
  ìƒˆ í‰ê·  ë§¤ìž…ê°€ = (ê¸°ì¡´ ë³´ìœ  ê°€ì¹˜ + ì´ë²ˆ ë§¤ìˆ˜ ê¸ˆì•¡) / ì´ ë³´ìœ  ìˆ˜ëŸ‰
  ```

#### ðŸ”´ ë§¤ë„ (Sell)
- **ì¡°ê±´**: ì¶”ì²œ ì ìˆ˜ â‰¤ 20ì 
- **ì‹¤í–‰**: ë³´ìœ í•œ ì£¼ì‹ **ì „ëŸ‰ ë§¤ë„**
- **ê³„ì‚°ì‹**:
  ```
  ë§¤ë„ ê¸ˆì•¡ = ë³´ìœ  ìˆ˜ëŸ‰ Ã— í˜„ìž¬ê°€
  ìƒˆ í˜„ê¸ˆ = ê¸°ì¡´ í˜„ê¸ˆ + ë§¤ë„ ê¸ˆì•¡
  ë³´ìœ  ìˆ˜ëŸ‰ = 0
  ```

#### âšª ê´€ë§ (Hold)
- **ì¡°ê±´**: 21ì  â‰¤ ì¶”ì²œ ì ìˆ˜ â‰¤ 79ì 
- **ì‹¤í–‰**: ì•„ë¬´ í–‰ë™ë„ í•˜ì§€ ì•ŠìŒ

## ðŸ”„ ì‹¤í–‰ íë¦„

### 1. ë§¤ì‹œê°„ ìžë™ ì‹¤í–‰
GitHub Actions ì›Œí¬í”Œë¡œê°€ ë§¤ì‹œê°„ ë‹¤ìŒ ìž‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

```
1. yfinanceì—ì„œ ìµœì‹  ì‹œì„¸ ë‹¤ìš´ë¡œë“œ (9ê°œì›”ì¹˜)
2. ê° ì¢…ëª©ë³„ë¡œ:
   a. ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
   b. ì¶”ì²œ ì ìˆ˜ ì‚°ì¶œ
   c. ë§¤ë§¤ ê·œì¹™ ì ìš©
   d. í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸
3. ê²°ê³¼ë¥¼ data/portfolio.jsonì— ì €ìž¥
```

### 2. ì‹¤ì œ ì˜ˆì‹œ

**ì‹œë‚˜ë¦¬ì˜¤**: ì‚¼ì„±ì „ìž ëª¨ì˜íˆ¬ìž

```
[ì´ˆê¸° ìƒíƒœ]
í˜„ê¸ˆ: 10,000,000ì›
ë³´ìœ  ì£¼ì‹: 0ì£¼
í‰ê·  ë§¤ìž…ê°€: 0ì›

[Day 1] í˜„ìž¬ê°€: 70,000ì›, ì¶”ì²œ ì ìˆ˜: 85ì  â†’ ë§¤ìˆ˜
â†’ ë§¤ìˆ˜ ìˆ˜ëŸ‰: 10,000,000 / 70,000 = 142ì£¼
â†’ ë§¤ìˆ˜ ê¸ˆì•¡: 142 Ã— 70,000 = 9,940,000ì›
â†’ ë‚¨ì€ í˜„ê¸ˆ: 60,000ì›
â†’ í‰ê·  ë§¤ìž…ê°€: 70,000ì›

[Day 2] í˜„ìž¬ê°€: 72,000ì›, ì¶”ì²œ ì ìˆ˜: 65ì  â†’ ê´€ë§
â†’ ë³€ë™ ì—†ìŒ (ë³´ìœ : 142ì£¼, í˜„ê¸ˆ: 60,000ì›)

[Day 3] í˜„ìž¬ê°€: 75,000ì›, ì¶”ì²œ ì ìˆ˜: 82ì  â†’ ë§¤ìˆ˜
â†’ ì¶”ê°€ ë§¤ìˆ˜ ìˆ˜ëŸ‰: 60,000 / 75,000 = 0ì£¼ (í˜„ê¸ˆ ë¶€ì¡±)
â†’ ë§¤ìˆ˜ ì‹¤íŒ¨ (ê°€ìš© í˜„ê¸ˆ ë¶€ì¡±)

[Day 10] í˜„ìž¬ê°€: 68,000ì›, ì¶”ì²œ ì ìˆ˜: 18ì  â†’ ë§¤ë„
â†’ ë§¤ë„ ê¸ˆì•¡: 142 Ã— 68,000 = 9,656,000ì›
â†’ ì´ í˜„ê¸ˆ: 9,656,000 + 60,000 = 9,716,000ì›
â†’ ì†ì‹¤: -284,000ì› (-2.84%)
```

## ðŸ“ˆ ì„±ê³¼ ì¸¡ì •

### ì£¼ìš” ì§€í‘œ

#### 1. **ì´ ìžì‚°** (Total Value)
```
ì´ ìžì‚° = ê°€ìš© í˜„ê¸ˆ + (ë³´ìœ  ìˆ˜ëŸ‰ Ã— í˜„ìž¬ê°€)
```

#### 2. **ëˆ„ì  ì†ìµ** (Profit/Loss)
```
ëˆ„ì  ì†ìµ = ì´ ìžì‚° - ì´ˆê¸° ìžë³¸
ìˆ˜ìµë¥  = (ëˆ„ì  ì†ìµ / ì´ˆê¸° ìžë³¸) Ã— 100%
```

#### 3. **í‰ê·  ë§¤ìž…ê°€ ëŒ€ë¹„ ìˆ˜ìµë¥ **
```
í‰ê°€ ì†ìµ = (í˜„ìž¬ê°€ - í‰ê·  ë§¤ìž…ê°€) Ã— ë³´ìœ  ìˆ˜ëŸ‰
í‰ê°€ ìˆ˜ìµë¥  = ((í˜„ìž¬ê°€ - í‰ê·  ë§¤ìž…ê°€) / í‰ê·  ë§¤ìž…ê°€) Ã— 100%
```

### ëŒ€ì‹œë³´ë“œ í‘œì‹œ
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:

**ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤**:
- ì´ ìžì‚°
- ê°€ìš© í˜„ê¸ˆ
- ë³´ìœ  í‰ê°€ê¸ˆì•¡
- ì´ˆê¸° ì´ìžë³¸
- ëˆ„ì  ì†ìµ ë° ìˆ˜ìµë¥ 

**ì¢…ëª©ë³„ í˜„í™©**:
- ê°€ìš© í˜„ê¸ˆ
- ë³´ìœ  ìˆ˜ëŸ‰
- í‰ê·  ë§¤ìž…ê°€
- í‰ê°€ ê¸ˆì•¡
- ì´ ìžì‚°
- ìµœê·¼ ë§¤ë§¤ ë‚´ì—­ (ë‚ ì§œ, ìˆ˜ëŸ‰, ê°€ê²©)

## ðŸŽ¨ ì°¨íŠ¸ ì‹œê°í™”

### ë§¤ìˆ˜/ë§¤ë„ ì‹œê·¸ë„ í‘œì‹œ
ì°¨íŠ¸ì—ëŠ” ê³¼ê±° ë§¤ìˆ˜/ë§¤ë„ê°€ ì ì ˆí–ˆë˜ ì‹œì ì´ í‘œì‹œë©ë‹ˆë‹¤:

- **ðŸŸ¢ ì´ˆë¡ ì‚¼ê°í˜• (â–²)**: ë§¤ìˆ˜ ì‹œê·¸ë„ (ì ìˆ˜ â‰¥ 80)
- **ðŸ”´ ë¹¨ê°„ ì—­ì‚¼ê°í˜• (â–¼)**: ë§¤ë„ ì‹œê·¸ë„ (ì ìˆ˜ â‰¤ 20)

### ë¶„ì„ ê¸°ê°„
- **ê¸°ë³¸ í‘œì‹œ**: ìµœê·¼ 30ê±°ëž˜ì¼
- **ìµœëŒ€ í™•ìž¥**: 180ê±°ëž˜ì¼ (ì•½ 9ê°œì›”)
- **ì¡°ì ˆ ë‹¨ìœ„**: 5ì¼ì”© ì¦ê°

## âš ï¸ ì¤‘ìš” ìœ ì˜ì‚¬í•­

### 1. êµìœ¡ ëª©ì  ì „ìš©
ë³¸ ëª¨ì˜íˆ¬ìžëŠ” **êµìœ¡ ë° ì „ëžµ ê²€ì¦ ëª©ì **ìž…ë‹ˆë‹¤. ì‹¤ì œ íˆ¬ìž ì˜ì‚¬ê²°ì •ì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

### 2. ì‹¤ì œì™€ì˜ ì°¨ì´
- **ê±°ëž˜ ìˆ˜ìˆ˜ë£Œ ë¯¸ë°˜ì˜**: ì‹¤ì œ ë§¤ë§¤ ì‹œ ë°œìƒí•˜ëŠ” ìˆ˜ìˆ˜ë£Œì™€ ì„¸ê¸ˆì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ
- **ìŠ¬ë¦¬í”¼ì§€ ë¬´ì‹œ**: ì‹¤ì œ ì£¼ë¬¸ ì²´ê²°ê°€ì™€ í˜„ìž¬ê°€ì˜ ì°¨ì´ ë¯¸ë°˜ì˜
- **ì‹œìž¥ ìœ ë™ì„±**: ì›í•˜ëŠ” ìˆ˜ëŸ‰ì„ ì¦‰ì‹œ ë§¤ë§¤í•  ìˆ˜ ìžˆë‹¤ê³  ê°€ì •
- **ë‰´ìŠ¤/ê³µì‹œ ì˜í–¥**: ê¸°ìˆ ì  ì§€í‘œë§Œ ë°˜ì˜, íŽ€ë”ë©˜í„¸ ë¬´ì‹œ

### 3. ë°ì´í„° ì§€ì—°
- GitHub ActionsëŠ” ë§¤ì‹œê°„ ì‹¤í–‰ë˜ì§€ë§Œ, yfinance API ì‘ë‹µ ì§€ì—°ê³¼ í•œêµ­ ì‹œìž¥ ë§ˆê° ì‹œê°„ ì°¨ì´ë¡œ ì¸í•´ ì™„ì „í•œ ì‹¤ì‹œê°„ ë°˜ì˜ì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
- í”„ë¡ íŠ¸ì—”ë“œëŠ” 20ë¶„ ì£¼ê¸°ë¡œ ë°ì´í„°ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.

### 4. ë°±í…ŒìŠ¤íŒ…ì˜ í•œê³„
ê³¼ê±° ë°ì´í„°ë¡œ ê³„ì‚°ëœ ì‹œê·¸ë„ì€ **ë‹¹ì‹œ ì‹œì ì—ì„œ ì•Œ ìˆ˜ ì—†ì—ˆë˜ ë¯¸ëž˜ ì •ë³´**ê°€ í¬í•¨ë˜ì§€ ì•Šì•˜ì§€ë§Œ, ì‹¤ì œ íˆ¬ìžì—ì„œëŠ” ì‹¬ë¦¬ì  ìš”ì¸, ê¸‰ê²©í•œ ì‹œìž¥ ë³€ë™ ë“± ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ë³€ìˆ˜ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤.

## ðŸ”§ ê¸°ìˆ  êµ¬í˜„

### ë°ì´í„° íë¦„
```
1. fetch_market_data.py ì‹¤í–‰
   â†“
2. portfolio.json ë¡œë“œ (ê¸°ì¡´ ìƒíƒœ)
   â†“
3. ê° ì¢…ëª©ë³„ ì¶”ì²œ ì ìˆ˜ ê³„ì‚°
   â†“
4. ë§¤ë§¤ ê·œì¹™ ì ìš©
   â†“
5. update_portfolio_entry() ì‹¤í–‰
   â†“
6. portfolio.json ì €ìž¥ (ìƒˆ ìƒíƒœ)
   â†“
7. latest.jsonì— í†µí•© (í”„ë¡ íŠ¸ì—”ë“œìš©)
```

### ì£¼ìš” í•¨ìˆ˜

#### `update_portfolio_entry(entry, price, action)`
```python
# ìž…ë ¥
entry: ê¸°ì¡´ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ (dict)
price: í˜„ìž¬ê°€ (float)
action: 'buy', 'sell', 'hold' (str)

# ë°˜í™˜
updated_entry: ì—…ë°ì´íŠ¸ëœ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ (dict)
  - cash: ê°€ìš© í˜„ê¸ˆ
  - shares: ë³´ìœ  ìˆ˜ëŸ‰
  - avg_price: í‰ê·  ë§¤ìž…ê°€
  - last_action: ìµœê·¼ ê±°ëž˜ ë‚´ì—­
```

#### `compute_trading_signals(history)`
```python
# ìž…ë ¥
history: ì „ì²´ ê°€ê²© ížˆìŠ¤í† ë¦¬ (DataFrame)

# ë°˜í™˜
signals: ë§¤ìˆ˜/ë§¤ë„ ì‹œê·¸ë„ ëª©ë¡ (list)
  [
    {
      'timestamp': ISO 8601 ë‚ ì§œ,
      'action': 'buy' | 'sell',
      'score': ì¶”ì²œ ì ìˆ˜,
      'price': ë‹¹ì‹œ ê°€ê²©
    },
    ...
  ]
```

## ðŸ“š ì¶”ê°€ ì •ë³´

### ê´€ë ¨ íŒŒì¼
- `scripts/fetch_market_data.py`: ë§¤ë§¤ ë¡œì§ êµ¬í˜„
  - ë¼ì¸ 312-391: `update_portfolio_entry()` í•¨ìˆ˜
  - ë¼ì¸ 433-478: `compute_trading_signals()` í•¨ìˆ˜
- `data/portfolio.json`: í˜„ìž¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ
- `data/latest.json`: í”„ë¡ íŠ¸ì—”ë“œì— ì œê³µë˜ëŠ” í†µí•© ë°ì´í„°

### README ì°¸ê³ 
ë” ìžì„¸í•œ í”„ë¡œì íŠ¸ ì„¤ëª…ì€ [README.md](README.md)ë¥¼ í™•ì¸í•˜ì„¸ìš”.

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-07
